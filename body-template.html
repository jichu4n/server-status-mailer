{# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
 #                                                                           #
 #  Copyright (C) 2015 Chuan Ji <ji@chu4n.com>                               #
 #                                                                           #
 #  Licensed under the Apache License, Version 2.0 (the "License");          #
 #  you may not use this file except in compliance with the License.         #
 #  You may obtain a copy of the License at                                  #
 #                                                                           #
 #   http://www.apache.org/licenses/LICENSE-2.0                              #
 #                                                                           #
 #  Unless required by applicable law or agreed to in writing, software      #
 #  distributed under the License is distributed on an "AS IS" BASIS,        #
 #  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. #
 #  See the License for the specific language governing permissions and      #
 #  limitations under the License.                                           #
 #                                                                           #
 # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #}

{# Styles extracted from
   https://github.com/advancedrei/BootstrapForEmail/blob/master/Stylesheet/bootstrap-email.min.css
#}

<span style="font-family:'Segoe UI','Helvetica Neue',Helvetica,Arial,sans-serif;font-size:13px;line-height:20px;color:#333;background-color:#fff">

<p class="h3" style="margin:10px 0;font-family:inherit;font-weight:bold;line-height:1;color:inherit;text-rendering:optimizelegibility;font-size:24px;line-height:40px">
  Server status for {{host}}<br>{{now_str}}
  <br>
</p>

<br>

{% for command_result in command_results %}
{% if not command_result.attachment_only %}
<p class="h4" style="margin:10px 0;font-family:inherit;font-weight:bold;line-height:1;color:inherit;text-rendering:optimizelegibility;font-size:18px;line-height:20px">{{command_result.label}}</p>
<table>
  <tbody>
    <tr>
      <td class="muted" style="color:#999;vertical-align:top">Command:</td>
      <td><code style="font-family:Monaco,Menlo,Consolas,'Courier New',monospace;font-size:11px;color:#333;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;padding:2px 4px;color:#d14;background-color:#f7f7f9;border:1px solid #e1e1e8">{{command_result.command}}</code></td>
    </tr>
    <tr>
      <td class="muted" style="color:#999;vertical-align:top">Output:</td>
      <td>
        <pre style="font-family:Monaco,Menlo,Consolas,'Courier New',monospace;color:#333;display:block;padding:9.5px;margin:0 0 10px;font-size:12px;line-height:20px;word-break:break-all;word-wrap:break-word;white-space:pre;white-space:pre-wrap;background-color:#f5f5f5;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.15);-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px">{{command_result.stdout}}</pre>
      </td>
    </tr>
    {% if command_result.stderr %}
    <tr>
      <td class="muted" style="color:#999;vertical-align:top">Error output:</td>
      <td>
        <pre style="font-family:Monaco,Menlo,Consolas,'Courier New',monospace;color:#333;display:block;padding:9.5px;margin:0 0 10px;font-size:12px;line-height:20px;word-break:break-all;word-wrap:break-word;white-space:pre;white-space:pre-wrap;background-color:#f5f5f5;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.15);-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px">{{command_result.stderr}}</pre>
      </td>
    </tr>
    {% endif %}
    {% if command_result.returncode %}
    <tr>
      <td class="muted" style="color:#999;vertical-align:top">Exit code:</td>
      <td>{{command_result.returncode}}</td>
    </tr>
    {% endif %}
    <tr>
      <td class="muted" style="color:#999;vertical-align:top">Run time:</td>
      <td>{{command_result.execution_time_seconds|round(3)}}s</td>
    </tr>
  </tbody>
</table>
{% endif %}
{% endfor %}

{% if attachment_only_command_results %}
<p class="h4" style="margin:10px 0;font-family:inherit;font-weight:bold;line-height:1;color:inherit;text-rendering:optimizelegibility;font-size:18px;line-height:20px">
  Full Status
</p>
<p>
  Please consult the attachment for further information:
</p>
<ul>
  {% for command_result in attachment_only_command_results %}
  <li>
  {{command_result.label}} (<code style="font-family:Monaco,Menlo,Consolas,'Courier New',monospace;font-size:11px;color:#333;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;padding:2px 4px;color:#d14;background-color:#f7f7f9;border:1px solid #e1e1e8">{{command_result.command}}</code>)
  </li>
  {% endfor %}
</ul>
{% endif %}

<hr>
<p class="muted" style="color:#999">
  Generated by
  <a href="https://github.com/jichu4n/server-status-mailer" target="_blank">
    Server Status Mailer
  </a>
  at {{now_str}}
</p>

</span>
